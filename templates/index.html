<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <title>Webcam display</title>

    <link rel="stylesheet" href="{{url_for('static',filename='css/mainpage.css')}}" >

     <!--<link rel="stylesheet" href="styles.css">-->

</head>
 
<body>
    <div id="container">
        <video autoplay="true" id="videoElement">
        </video>
        <div id="control_buttons">
            <table>
                <tr>
                  <td><button onclick="test_ajax(this)">LF</button></td>
                  <td><button onclick="test_ajax(this)">F</button></td>
                  <td><button onclick="test_ajax(this)">RF</button></td>
                </tr>
                <tr>
                  <td><button onclick="test_ajax(this)">L</button></td>
                  <td>O</td>
                  <td><button onclick="test_ajax(this)">R</button></td>
                </tr>
                <tr>
                  <td><button onclick="test_ajax(this)">LB</button></td>
                  <td><button onclick="test_ajax(this)">B</button></td>
                  <td><button onclick="test_ajax(this)">RB</button></td>
                </tr>
              </table>
        </div>
    </div>
    
    
    
</body>

<script type=text/javascript> 
    function test_ajax(id){
        x = id.innerHTML;
        console.log(x);
        $.ajax({
            type: "POST",
            url: "/process",
            data: JSON.stringify(x),
            contentType: "application/json",
            dataType: 'json'
        });
    };

</script>

<script>                                                          
    var video = document.querySelector("#videoElement");

    if (navigator.mediaDevices.getUserMedia) {
    navigator.mediaDevices.getUserMedia({ video: true })
        .then(function (stream) {
        video.srcObject = stream;
        console.log("Video is working");
        })
        .catch(function (err0r) {
        console.log("Something went wrong!");
        });
    }
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</html>